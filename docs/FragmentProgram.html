<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>9.14&nbsp;FragmentProgram</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="musa.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Authoring muvee Styles</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="License.html" class="tocviewlink" pltdoc="x">License</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" pltdoc="x">Getting Started</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Style_Package_Structure.html" class="tocviewlink" pltdoc="x">Style Package Structure</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Anatomy_of_a_muvee.html" class="tocviewlink" pltdoc="x">Anatomy of a muvee</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Tutorials.html" class="tocviewlink" pltdoc="x">Tutorials</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Specifying_Style_Behaviour.html" class="tocviewlink" pltdoc="x">Specifying Style Behaviour</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="About_effects_and_transitions.html" class="tocviewlink" pltdoc="x">About effects and transitions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Sound_effects.html" class="tocviewlink" pltdoc="x">Sound effects</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="List_of_primitive_effects_and_transitions.html" class="tocviewselflink" pltdoc="x">List of primitive effects and transitions</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="ShowTime_-_the_muvee_timeline.html" class="tocviewlink" pltdoc="x">Show<span class="mywbr"> </span>Time -<wbr></wbr> the muvee timeline</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Utility_functions.html" class="tocviewlink" pltdoc="x">Utility functions</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="A_Gentle_Introduction_to_muSE.html" class="tocviewlink" pltdoc="x">A Gentle Introduction to mu<span class="mywbr"> </span>SE</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>9&nbsp;</td><td><a href="List_of_primitive_effects_and_transitions.html" class="tocviewlink" pltdoc="x">List of primitive effects and transitions</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">9.1&nbsp;</td><td><a href="Alignment.html" class="tocviewlink" pltdoc="x">Alignment</a></td></tr><tr><td align="right">9.2&nbsp;</td><td><a href="Alpha.html" class="tocviewlink" pltdoc="x">Alpha</a></td></tr><tr><td align="right">9.3&nbsp;</td><td><a href="Blur.html" class="tocviewlink" pltdoc="x">Blur</a></td></tr><tr><td align="right">9.4&nbsp;</td><td><a href="BlurLayers.html" class="tocviewlink" pltdoc="x">Blur<span class="mywbr"> </span>Layers</a></td></tr><tr><td align="right">9.5&nbsp;</td><td><a href="Cg.html" class="tocviewlink" pltdoc="x">Cg</a></td></tr><tr><td align="right">9.6&nbsp;</td><td><a href="ColorQuad.html" class="tocviewlink" pltdoc="x">Color<span class="mywbr"> </span>Quad</a></td></tr><tr><td align="right">9.7&nbsp;</td><td><a href="ColorMapRGB.html" class="tocviewlink" pltdoc="x">Color<span class="mywbr"> </span>Map<span class="mywbr"> </span>RGB</a></td></tr><tr><td align="right">9.8&nbsp;</td><td><a href="ColorSelect.html" class="tocviewlink" pltdoc="x">Color<span class="mywbr"> </span>Select</a></td></tr><tr><td align="right">9.9&nbsp;</td><td><a href="CropMedia.html" class="tocviewlink" pltdoc="x">Crop<span class="mywbr"> </span>Media</a></td></tr><tr><td align="right">9.10&nbsp;</td><td><a href="CrossFade.html" class="tocviewlink" pltdoc="x">Cross<span class="mywbr"> </span>Fade</a></td></tr><tr><td align="right">9.11&nbsp;</td><td><a href="Desaturate.html" class="tocviewlink" pltdoc="x">Desaturate</a></td></tr><tr><td align="right">9.12&nbsp;</td><td><a href="Distort.html" class="tocviewlink" pltdoc="x">Distort</a></td></tr><tr><td align="right">9.13&nbsp;</td><td><a href="Flip.html" class="tocviewlink" pltdoc="x">Flip</a></td></tr><tr><td align="right">9.14&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Fragment<span class="mywbr"> </span>Program</a></td></tr><tr><td align="right">9.15&nbsp;</td><td><a href="GradientFade.html" class="tocviewlink" pltdoc="x">Gradient<span class="mywbr"> </span>Fade</a></td></tr><tr><td align="right">9.16&nbsp;</td><td><a href="GradientFade_ColorBorder.html" class="tocviewlink" pltdoc="x">Gradient<span class="mywbr"> </span>Fade_<span class="mywbr"> </span>Color<span class="mywbr"> </span>Border</a></td></tr><tr><td align="right">9.17&nbsp;</td><td><a href="Greyscale.html" class="tocviewlink" pltdoc="x">Greyscale</a></td></tr><tr><td align="right">9.18&nbsp;</td><td><a href="HeightMap.html" class="tocviewlink" pltdoc="x">Height<span class="mywbr"> </span>Map</a></td></tr><tr><td align="right">9.19&nbsp;</td><td><a href="Light.html" class="tocviewlink" pltdoc="x">Light</a></td></tr><tr><td align="right">9.20&nbsp;</td><td><a href="LookAt.html" class="tocviewlink" pltdoc="x">Look<span class="mywbr"> </span>At</a></td></tr><tr><td align="right">9.21&nbsp;</td><td><a href="Mask.html" class="tocviewlink" pltdoc="x">Mask</a></td></tr><tr><td align="right">9.22&nbsp;</td><td><a href="Material.html" class="tocviewlink" pltdoc="x">Material</a></td></tr><tr><td align="right">9.23&nbsp;</td><td><a href="MovingPolygons.html" class="tocviewlink" pltdoc="x">Moving<span class="mywbr"> </span>Polygons</a></td></tr><tr><td align="right">9.24&nbsp;</td><td><a href="OldMovieLines.html" class="tocviewlink" pltdoc="x">Old<span class="mywbr"> </span>Movie<span class="mywbr"> </span>Lines</a></td></tr><tr><td align="right">9.25&nbsp;</td><td><a href="OldMovieScratches.html" class="tocviewlink" pltdoc="x">Old<span class="mywbr"> </span>Movie<span class="mywbr"> </span>Scratches</a></td></tr><tr><td align="right">9.26&nbsp;</td><td><a href="PageCurl.html" class="tocviewlink" pltdoc="x">Page<span class="mywbr"> </span>Curl</a></td></tr><tr><td align="right">9.27&nbsp;</td><td><a href="Perspective.html" class="tocviewlink" pltdoc="x">Perspective</a></td></tr><tr><td align="right">9.28&nbsp;</td><td><a href="PictureQuad.html" class="tocviewlink" pltdoc="x">Picture<span class="mywbr"> </span>Quad</a></td></tr><tr><td align="right">9.29&nbsp;</td><td><a href="RadialBlur.html" class="tocviewlink" pltdoc="x">Radial<span class="mywbr"> </span>Blur</a></td></tr><tr><td align="right">9.30&nbsp;</td><td><a href="RapidOverlay.html" class="tocviewlink" pltdoc="x">Rapid<span class="mywbr"> </span>Overlay</a></td></tr><tr><td align="right">9.31&nbsp;</td><td><a href="Reflect.html" class="tocviewlink" pltdoc="x">Reflect</a></td></tr><tr><td align="right">9.32&nbsp;</td><td><a href="ReflectAndRipples.html" class="tocviewlink" pltdoc="x">Reflect<span class="mywbr"> </span>And<span class="mywbr"> </span>Ripples</a></td></tr><tr><td align="right">9.33&nbsp;</td><td><a href="RGBtoYUV.html" class="tocviewlink" pltdoc="x">RGBto<span class="mywbr"> </span>YUV</a></td></tr><tr><td align="right">9.34&nbsp;</td><td><a href="Rotate.html" class="tocviewlink" pltdoc="x">Rotate</a></td></tr><tr><td align="right">9.35&nbsp;</td><td><a href="Saturate.html" class="tocviewlink" pltdoc="x">Saturate</a></td></tr><tr><td align="right">9.36&nbsp;</td><td><a href="Scale.html" class="tocviewlink" pltdoc="x">Scale</a></td></tr><tr><td align="right">9.37&nbsp;</td><td><a href="SeamlessBackground.html" class="tocviewlink" pltdoc="x">Seamless<span class="mywbr"> </span>Background</a></td></tr><tr><td align="right">9.38&nbsp;</td><td><a href="Sepia.html" class="tocviewlink" pltdoc="x">Sepia</a></td></tr><tr><td align="right">9.39&nbsp;</td><td><a href="Shatter.html" class="tocviewlink" pltdoc="x">Shatter</a></td></tr><tr><td align="right">9.40&nbsp;</td><td><a href="Snow.html" class="tocviewlink" pltdoc="x">Snow</a></td></tr><tr><td align="right">9.41&nbsp;</td><td><a href="TextOut.html" class="tocviewlink" pltdoc="x">Text<span class="mywbr"> </span>Out</a></td></tr><tr><td align="right">9.42&nbsp;</td><td><a href="TextureSubset.html" class="tocviewlink" pltdoc="x">Texture<span class="mywbr"> </span>Subset</a></td></tr><tr><td align="right">9.43&nbsp;</td><td><a href="Translate.html" class="tocviewlink" pltdoc="x">Translate</a></td></tr><tr><td align="right">9.44&nbsp;</td><td><a href="VertexProgram.html" class="tocviewlink" pltdoc="x">Vertex<span class="mywbr"> </span>Program</a></td></tr><tr><td align="right">9.45&nbsp;</td><td><a href="VolumetricLights.html" class="tocviewlink" pltdoc="x">Volumetric<span class="mywbr"> </span>Lights</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>9.14&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Fragment<span class="mywbr"> </span>Program</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">9.14.1&nbsp;</td><td><a href="#(part._.Parameters)" class="tocviewlink" pltdoc="x">Parameters</a></td></tr><tr><td align="right">9.14.2&nbsp;</td><td><a href="#(part._.Examples)" class="tocviewlink" pltdoc="x">Examples</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">9.14.1<tt>&nbsp;</tt></span><a href="#(part._.Parameters)" class="tocsubseclink" pltdoc="x">Parameters</a></td></tr><tr><td><span class="tocsublinknumber">9.14.2<tt>&nbsp;</tt></span><a href="#(part._.Examples)" class="tocsubseclink" pltdoc="x">Examples</a></td></tr><tr><td><span class="tocsublinknumber">9.14.2.1<tt>&nbsp;</tt></span><a href="#(part._.The_most_basic_fragment_program)" class="tocsubseclink" pltdoc="x">The most basic fragment program</a></td></tr><tr><td><span class="tocsublinknumber">9.14.2.2<tt>&nbsp;</tt></span><a href="#(part._.A_fragment_program_that_greyscales_the_user_image)" class="tocsubseclink" pltdoc="x">A fragment program that greyscales the user image</a></td></tr><tr><td><span class="tocsublinknumber">9.14.2.3<tt>&nbsp;</tt></span><a href="#(part._.A_fragment_program_that_extracts_a_particular_color)" class="tocsubseclink" pltdoc="x">A fragment program that extracts a particular color</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Flip.html" title="backward to &quot;9.13 Flip&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="List_of_primitive_effects_and_transitions.html" title="up to &quot;9 List of primitive effects and transitions&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="GradientFade.html" title="forward to &quot;9.15 GradientFade&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>9.14<tt>&nbsp;</tt><a name="(part._.Fragment.Program)"></a>FragmentProgram</h4><p>Alright folks, we&rsquo;re getting into some hard-core stuff here. If you do not possess a programming background, may I suggest you skip this page. Failure to do so will only result in pain and suffering. :D</p><p>OpenGL allows you to code up fragment Programs which are basically pieces of assembly code. Fragment programs are good in cases when you want to add custom color effects to your muvee. An example of a fragment programs (amongst many others) that has been written for you is the <a href="Greyscale.html" pltdoc="x">Greyscale</a> effect. For a brief introduction of what a fragment program is, check out the <a href="http://en.wikipedia.org/wiki/ARB_(GPU_assembly_language)">wikipedia entry</a>. If you wish to read the proper technical page for fragment programs, please read <a href="http://oss.sgi.com/projects/ogl-sample/registry/ARB/fragment_program.txt">this</a>.</p><h5>9.14.1<tt>&nbsp;</tt><a name="(part._.Parameters)"></a>Parameters</h5><p><table cellspacing="0" class="boxed"><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-weight: bold">Parameters</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-weight: bold">Default</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-weight: bold">Range</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-weight: bold">Description</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">ProgramString</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">""</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The fragment program string </p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">NumParams</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic"></span>(<span style="font-style: italic"></span>0<span style="font-style: italic"> - </span>1<span style="font-style: italic"></span>6<span style="font-style: italic"></span>)<span style="font-style: italic"></span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The number of parameters we are specifying. There is a mechanism where you can send data from the muse code to the fragment program</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">r0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter r0</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">g0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter g0</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">b0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter b0</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">a0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter a0</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">r1</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter r1</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">g1</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter g1</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">b1</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter b1</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">a1</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter a1</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">r2</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter r2</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">g2</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter g2</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">b2</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter b2</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">a2</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter a2</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">r3</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter r3</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">g3</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter g3</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">b3</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter b3</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">a3</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0.0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>n/a</p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>The value of parameter a3</p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p></p></td></tr><tr><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktSym">GlobalMode</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span class="RktVal">0</span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p><span style="font-style: italic"></span>[<span style="font-style: italic"></span>0<span style="font-style: italic">,</span>1<span style="font-style: italic"></span>]<span style="font-style: italic"></span></p></td><td><p><span class="hspace">&nbsp;</span></p></td><td><p>See <a href="ColorMapRGB.html#(tech._globalmode)" class="techoutside" pltdoc="x"><span class="techinside">GlobalMode</span></a></p></td></tr></table></p><p><div class="SIntrapara"><span style="font-weight: bold">Input pattern</span>: <span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></div><div class="SIntrapara"><span style="font-weight: bold"><a href="A_note_on_Image_Operators.html#(tech._image._op)" class="techoutside" pltdoc="x"><span class="techinside">Image-Op</span></a></span>: Depends on the GlobalMode parameter.</div></p><h5>9.14.2<tt>&nbsp;</tt><a name="(part._.Examples)"></a>Examples</h5><h5>9.14.2.1<tt>&nbsp;</tt><a name="(part._.The_most_basic_fragment_program)"></a>The most basic fragment program</h5><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">muSE v2</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">   My not-so-awesome style.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">   This style does absolutely nothing..</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">style-parameters</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">segment-durations</span><span class="hspace">&nbsp;</span><span class="RktVal">8.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-global-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect-stack</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Perspective"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"CropMedia"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(</span><span class="RktSym">define</span> <span class="RktSym">shader-program</span>
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">"!!ARBfp1.0</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP texfrag;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEX texfrag, fragment.texcoord[0], texture[0], 2D;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">MOV result.color, texfrag;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">END"</span></span></p></td></tr></table></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">)</span></div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"FragmentProgram"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"ProgramString"</span><span class="hspace">&nbsp;</span><span class="RktSym">shader-program</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The above style instantiates a <span class="RktSym">FragmentProgram</span> with a very simple assembly program. Every fragment program must start with <span class="RktSym">!!ARBfp1.0</span> and end with <span class="RktSym">END</span>.This is by design and you are expected to follow that rule. The <span class="RktSym">texfrag</span> variable is initialized to contain the user image pixels. And all we do with it is copy it to the output buffer. Essentially the fragment program does nothing interesting. Do note that this program is executed for every pixel (referred to as a fragment in OpenGL). So at any given time, texfrag contains the RGBA values of a single pixel.</p><p><img src="original.jpg" alt="" /></p><h5>9.14.2.2<tt>&nbsp;</tt><a name="(part._.A_fragment_program_that_greyscales_the_user_image)"></a>A fragment program that greyscales the user image</h5><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">muSE v2</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">   My  kinda awesome style.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">   This style greyscales the user image</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">style-parameters</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">segment-durations</span><span class="hspace">&nbsp;</span><span class="RktVal">8.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-global-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect-stack</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Perspective"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"CropMedia"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(</span><span class="RktSym">define</span> <span class="RktSym">shader-program</span>
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">"!!ARBfp1.0</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP texfrag;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEX texfrag, fragment.texcoord[0], texture[0], 2D;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP gray;</span></span></p></td></tr><tr><td><p><span class="stt">ADD<span class="hspace">&nbsp;&nbsp;</span><span class="stt">gray, texfrag.r, texfrag.g;</span></span></p></td></tr><tr><td><p><span class="stt">ADD<span class="hspace">&nbsp;&nbsp;</span><span class="stt">gray, gray, texfrag.b;</span></span></p></td></tr><tr><td><p><span class="stt">MUL<span class="hspace">&nbsp;&nbsp;</span><span class="stt">gray, gray, 0.33;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">MOV result.color, gray;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">END"</span></span></p></td></tr></table></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">)</span></div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"FragmentProgram"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"ProgramString"</span><span class="hspace">&nbsp;</span><span class="RktSym">shader-program</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The above style converts the user image to greyscale. That&rsquo;s not exactly how we would usually do a greyscale but it&rsquo;s the simplest version to explain. Essentially we create a <span class="RktSym">gray</span> variable, add up the <span class="RktSym">r</span>, <span class="RktSym">g</span>, <span class="RktSym">b</span> values of our user image and divide the sum by <span class="RktVal">3.0</span> Finally we move the result stored in <span class="RktSym">gray</span> to <span class="RktSym">result.color</span>. Et voila!</p><p><img src="greyscale.jpg" alt="" /></p><h5>9.14.2.3<tt>&nbsp;</tt><a name="(part._.A_fragment_program_that_extracts_a_particular_color)"></a>A fragment program that extracts a particular color</h5><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">muSE v2</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">   My  unbelievably awesome style.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">   This style greyscales the user image </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">   but maintains the stuff that are coloured blue. :)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">style-parameters</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">segment-durations</span><span class="hspace">&nbsp;</span><span class="RktVal">8.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-global-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect-stack</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Perspective"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"CropMedia"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(</span><span class="RktSym">define</span> <span class="RktSym">shader-program</span>
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">"!!ARBfp1.0</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP texfrag;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEX texfrag, fragment.texcoord[0], texture[0], 2D;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#ColorInterest is linked to (a0,r0,g0,b0)</span></span></p></td></tr><tr><td><p><span class="stt">PARAM ColorInterest<span class="hspace">&nbsp;&nbsp;</span><span class="stt">= program.local[0];</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#ColorTolerance is linked to (a1,r1,g1,b1)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">PARAM ColorTolerance = program.local[1];</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#LRPTolerance is linked to (a2,r2,g2,b2)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">PARAM LRPTolerance = program.local[2];</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#Let's find the distance of the current pixel</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">#to the ColorInterest value</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP distance;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">SUB distance, ColorInterest, texfrag;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">DP3 distance, distance, distance;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#Is the distance above or below the tolerance level.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP distanceCMP;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">SLT distanceCMP, distance, ColorTolerance;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">SUB distanceCMP, distanceCMP, 0.5;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#The initial set of pixel that passed. ie distance &lt; tolerance</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP texfragA;</span></span></p></td></tr><tr><td><p><span class="stt">MOV<span class="hspace">&nbsp;&nbsp;</span><span class="stt">texfragA, texfrag;</span></span></p></td></tr><tr><td><p><span class="stt">MOV<span class="hspace">&nbsp;&nbsp;</span><span class="stt">texfragA.a, 1.0;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">#This section tries to do a linear interpolation just after tolerance</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">#else well get a sudden stop when our threshold is exceeded.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP gradient;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">TEMP scrap;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">SUB gradient, distance, ColorTolerance;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">RCP scrap.r, LRPTolerance.r;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">MUL_SAT gradient, gradient, scrap.r;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">LRP gradient, gradient, 0.0, texfragA;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">TEMP finalColor;</span></span></p></td></tr><tr><td><p><span class="stt">CMP<span class="hspace">&nbsp;&nbsp;</span><span class="stt">finalColor, distanceCMP, gradient, texfragA;</span></span></p></td></tr><tr><td><p><span class="stt">MUL<span class="hspace">&nbsp;&nbsp;</span><span class="stt">finalColor, finalColor, fragment.color.a;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">MOV result.color, finalColor;</span></span></p></td></tr></table></div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">END"</span></span></p></td></tr></table></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">)</span></div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">layers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Greyscale"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">input</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">A</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"FragmentProgram"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">input</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"ProgramString"</span><span class="hspace">&nbsp;</span><span class="RktSym">shader_program</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"a0"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorInterest</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"r0"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorInterest</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"g0"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorInterest</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"b0"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorInterest</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"a1"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorTolerance</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"r1"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorTolerance</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"g1"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorTolerance</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"b1"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">ColorTolerance</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"a2"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.6</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">LRP Tolerance</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"r2"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.6</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">LRP Tolerance</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"g2"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.6</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">LRP Tolerance</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"b2"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.6</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">LRP Tolerance</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"NumParams"</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The above style is slightly more complicated than the first two examples. Ok ok it&rsquo;s a lot more complicated that the first two examples. The <span class="RktSym">FragmentProgram</span> is a color selector. From muse, we send in the color we want to retain (referred to as our <span class="RktSym">colorInterest</span>) and the <span class="RktSym">fragmentProgram</span> returns sections of the picture with that color. Refer to the screenshot below for a visual reference. As you can see, only things that are colored blue are displayed as is. The rest are greyscaled.</p><p>If you look at the <a href="Applications_of_effects.html#(part._.The_segment_effect)" pltdoc="x">segment-level-effect</a>, our <a href="Combining_effects.html#(part._layers)" pltdoc="x">layers</a> has two effect. The first one is a  <a href="Greyscale.html" pltdoc="x">Greyscale</a> effect and the next one is our <span style="font-weight: bold">FragmentProgram</span> that will only return stuff that are colored blue. The <span class="RktPn">{</span><span class="RktSym">a0</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">r0</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">g0</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">b0</span><span class="RktPn">}</span> set of paramters initialize the color we want to retain. As you can see, it&rsquo;s set to blue. The <span class="RktPn">{</span><span class="RktSym">a1</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">r1</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">g1</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">b1</span><span class="RktPn">}</span> sets the threshold at which we&rsquo;ll accept colors. Finally <span class="RktPn">{</span><span class="RktSym">a2</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">r2</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">g2</span><span class="stt"> </span><span class="RktRdr">,</span><span class="RktSym">b2</span><span class="RktPn">}</span> sets the amount of interpolation we want *after* the threshold. The best way to understand what I mean is to set it to zero, you&rsquo;ll then appreaciate its function.</p><p><img src="fragmentProgram.jpg" alt="" /></p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Flip.html" title="backward to &quot;9.13 Flip&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="List_of_primitive_effects_and_transitions.html" title="up to &quot;9 List of primitive effects and transitions&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="GradientFade.html" title="forward to &quot;9.15 GradientFade&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>