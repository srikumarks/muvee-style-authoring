<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>6.6&nbsp;The shot vector transform</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="musa.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Authoring muvee Styles</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="License.html" class="tocviewlink" pltdoc="x">License</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" pltdoc="x">Getting Started</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Style_Package_Structure.html" class="tocviewlink" pltdoc="x">Style Package Structure</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Anatomy_of_a_muvee.html" class="tocviewlink" pltdoc="x">Anatomy of a muvee</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Tutorials.html" class="tocviewlink" pltdoc="x">Tutorials</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Specifying_Style_Behaviour.html" class="tocviewselflink" pltdoc="x">Specifying Style Behaviour</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="About_effects_and_transitions.html" class="tocviewlink" pltdoc="x">About effects and transitions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Sound_effects.html" class="tocviewlink" pltdoc="x">Sound effects</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="List_of_primitive_effects_and_transitions.html" class="tocviewlink" pltdoc="x">List of primitive effects and transitions</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="ShowTime_-_the_muvee_timeline.html" class="tocviewlink" pltdoc="x">Show<span class="mywbr"> </span>Time -<wbr></wbr> the muvee timeline</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Utility_functions.html" class="tocviewlink" pltdoc="x">Utility functions</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="A_Gentle_Introduction_to_muSE.html" class="tocviewlink" pltdoc="x">A Gentle Introduction to mu<span class="mywbr"> </span>SE</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>6&nbsp;</td><td><a href="Specifying_Style_Behaviour.html" class="tocviewlink" pltdoc="x">Specifying Style Behaviour</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="muSE.html" class="tocviewlink" pltdoc="x">mu<span class="mywbr"> </span>SE</a></td></tr><tr><td align="right">6.2&nbsp;</td><td><a href="The_style-parameters_section.html" class="tocviewlink" pltdoc="x">The <span class="RktSym">style-<wbr></wbr>parameters</span> section</a></td></tr><tr><td align="right">6.3&nbsp;</td><td><a href="Title_and_Credits.html" class="tocviewlink" pltdoc="x">Title and Credits</a></td></tr><tr><td align="right">6.4&nbsp;</td><td><a href="Controlling_a_style_s_music_response.html" class="tocviewlink" pltdoc="x">Controlling a style&rsquo;s music response</a></td></tr><tr><td align="right">6.5&nbsp;</td><td><a href="Descriptor_matching.html" class="tocviewlink" pltdoc="x">Descriptor matching</a></td></tr><tr><td align="right">6.6&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">The shot vector transform</a></td></tr><tr><td align="right">6.7&nbsp;</td><td><a href="Miscellany.html" class="tocviewlink" pltdoc="x">Miscellany</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>6.6&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">The shot vector transform</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.6.1&nbsp;</td><td><a href="#(part._.The_shot_object)" class="tocviewlink" pltdoc="x">The shot object</a></td></tr><tr><td align="right">6.6.2&nbsp;</td><td><a href="#(part._.Basic_shot_properties)" class="tocviewlink" pltdoc="x">Basic shot properties</a></td></tr><tr><td align="right">6.6.3&nbsp;</td><td><a href="#(part._.Presentation_properties)" class="tocviewlink" pltdoc="x">Presentation properties</a></td></tr><tr><td align="right">6.6.4&nbsp;</td><td><a href="#(part._.Utility_functions)" class="tocviewlink" pltdoc="x">Utility functions</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.6.1<tt>&nbsp;</tt></span><a href="#(part._.The_shot_object)" class="tocsubseclink" pltdoc="x">The shot object</a></td></tr><tr><td><span class="tocsublinknumber">6.6.2<tt>&nbsp;</tt></span><a href="#(part._.Basic_shot_properties)" class="tocsubseclink" pltdoc="x">Basic shot properties</a></td></tr><tr><td><span class="tocsublinknumber">6.6.3<tt>&nbsp;</tt></span><a href="#(part._.Presentation_properties)" class="tocsubseclink" pltdoc="x">Presentation properties</a></td></tr><tr><td><span class="tocsublinknumber">6.6.3.1<tt>&nbsp;</tt></span><a href="#(part._shot_treatment)" class="tocsubseclink" pltdoc="x"><span class="RktSym">shot.treatment</span></a></td></tr><tr><td><span class="tocsublinknumber">6.6.3.2<tt>&nbsp;</tt></span><a href="#(part._shot_presenter)" class="tocsubseclink" pltdoc="x"><span class="RktSym">shot.presenter</span></a></td></tr><tr><td><span class="tocsublinknumber">6.6.3.3<tt>&nbsp;</tt></span><a href="#(part._shot_entry-effect_and_shot_exit-effect)" class="tocsubseclink" pltdoc="x"><span class="RktSym">shot.entry-<wbr></wbr>effect</span> and <span class="RktSym">shot.exit-<wbr></wbr>effect</span></a></td></tr><tr><td><span class="tocsublinknumber">6.6.4<tt>&nbsp;</tt></span><a href="#(part._.Utility_functions)" class="tocsubseclink" pltdoc="x">Utility functions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Descriptor_matching.html" title="backward to &quot;6.5 Descriptor matching&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Specifying_Style_Behaviour.html" title="up to &quot;6 Specifying Style Behaviour&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Miscellany.html" title="forward to &quot;6.7 Miscellany&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>6.6<tt>&nbsp;</tt><a name="(part._.The_shot_vector_transform)"></a>The shot vector transform</h4><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote><p>The constructor works by allocating segments to the media items
specified by the user in muvee Reveal&rsquo;s media panel. Certain kinds of
productions need more control over the structure of the input media in
order to be possible. For example, a style may be wish to present three
photos at a time. In such a case, you may not want the duration for
which a three-photo composition is shown to be three times as long as
the time the style would spend on a single photo. The shot vector
transform mechanism permits you control over such aspects of the
construction through the manipulation of shots passed by the user before
the constructor gets to see them.</p><p>The shot vector transform is a function that takes a
<a href="http://muvee-symbolic-expressions.googlecode.com/svn/api/group__Vectors.html">vector</a>
of shots and is expected to return a vector shots. The returned shot vector is what
is seen by the constructor. The shots passed in the input can be
reused in the output with or without modification. The function may also
insert new shots or decide not to show certain shots specified by the
user.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">muvee-shot-vector-transform</span><span class="hspace">&nbsp;</span><span class="RktSym">shotvec</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">....</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">result-shotvec</span><span class="RktPn">)</span></td></tr></table></blockquote><p><span class="RktSym">shotvec</span>, as the name suggests, is a vector of shot objects and
<span class="RktSym">result-shotvec</span> is the transformed shot vector. The simplest
shot vector transform is therefore the identity function.</p><h5>6.6.1<tt>&nbsp;</tt><a name="(part._.The_shot_object)"></a>The shot object</h5><p>The shot object represents a media item given by the user. It can be a photo,
a segment video clip or an inter-title card.</p><p>Each photo is represented using its own shot object. So is each inter-title card.</p><p>Video clips have a more complicated relationship to the items specified by the user.
All video clips are split up into shots according to a) the shot boundaries detected
in the video, b) the excluded sections and c) highlights. Each highlight is assigned
its own shot object and subsumes any shot boundaries within it. All excluded material
is thrown away and does not have any representation in the shot vector.</p><p>The shot object provides access to some of the properties of the media items,
some of which can be changed. In the code below we assume that <span class="RktSym">shot</span> stands
for a shot object.</p><h5>6.6.2<tt>&nbsp;</tt><a name="(part._.Basic_shot_properties)"></a>Basic shot properties</h5><p><div class="SIntrapara"><span class="RktSym">shot.file-name</span>: (read-only)
</div><div class="SIntrapara"><blockquote><p>Full path to the media file.</p></blockquote></div></p><p><div class="SIntrapara"><span class="RktSym">shot.attribs</span>: (read-write)
</div><div class="SIntrapara"><blockquote><p>A list of symbols indicating shot attributes. Symbols can be one or more
  of <span class="RktSym">sync-boost</span>, <span class="RktSym">image</span>, <span class="RktSym">video</span> or <span class="RktSym">inter-title</span>.
  To tell whether a shot is video, you can do <span class="RktPn">(</span><span class="RktSym">find</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">video</span><span class="stt"> </span><span class="RktSym">shot.attribs</span><span class="RktPn">)</span>.</p></blockquote></div></p><p><div class="SIntrapara"><span class="RktSym">shot.min-duration-secs</span>: (read-write)
</div><div class="SIntrapara"><blockquote><p>On input, contains the "minimum duration" setting indicated by the user for
   photos, taking into account both the global setting in the "Personalize" panel
   as well as any photo-specific setting. This field is irrelevant for video.</p></blockquote></div></p><p><div class="SIntrapara"><span class="RktSym">shot.id</span>: (read-only)
</div><div class="SIntrapara"><blockquote><p>The unique ID (number) of the media panel item that this shot is associated with. All
    shots that were created from a single media panel item will have the same <span class="RktSym">id</span>
    property. This allows you to regroup the shots to be isomorphic to the media panel if
    so desired.</p></blockquote></div></p><p><div class="SIntrapara"><span class="RktSym">shot.mtime</span>: (read-only)
</div><div class="SIntrapara"><blockquote><p>A list of the form <span class="RktPn">(</span><span class="RktSym">media-start-time</span><span class="stt"> </span><span class="RktSym">media-end-time</span><span class="RktPn">)</span> that specifies the media
  interval within a video file that the shot represents. Applicable only to video shots
  and irrelevant for images and inter-titles.</p></blockquote></div></p><p><div class="SIntrapara"><span class="RktSym">shot.captions</span>: (read-only)
</div><div class="SIntrapara"><blockquote><p>A list of the form <span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">from1</span><span class="stt"> </span><span class="RktSym">to1</span><span class="stt"> </span><span class="RktSym">text1</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">from2</span><span class="stt"> </span><span class="RktSym">to2</span><span class="stt"> </span><span class="RktSym">text2</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span> if the user
  has specified captions for the shot, or <span class="RktPn">(</span><span class="RktPn">)</span> if no caption is set for the shot.
  Photos will have at most one caption but videos can have more than one. Caption text
  might consist of a single line of text or two lines separated by a line break "\n"</p></blockquote></div></p><p><div class="SIntrapara"><span class="RktSym">shot.highlights</span>: (read-only)
</div><div class="SIntrapara"><blockquote><p>If the shot is a highlight, then this will be a list of the form <span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">from</span><span class="stt"> </span><span class="RktSym">to</span><span class="RktPn">)</span><span class="RktPn">)</span>. If
   the shot has no highlights or is not video, this property will be <span class="RktPn">(</span><span class="RktPn">)</span>.</p></blockquote></div></p><h5>6.6.3<tt>&nbsp;</tt><a name="(part._.Presentation_properties)"></a>Presentation properties</h5><p>Shot objects have some properties that can be set to control their presentation in
ways that can be more flexible than the <span class="RktSym">muvee-segment-effect</span> mechanism.
All presentation properties of shots are unset upon input - i.e. only the shot
vector transform can set these properties.</p><p>All presentation properties can be used with both <span class="RktSym">put</span> and <span class="RktSym">get</span>.
However, when you do, say, <span class="RktPn">(</span><span class="RktSym">put</span><span class="stt"> </span><span class="RktSym">shot.treatment</span><span class="stt"> </span><span class="RktSym">my-fabulous-effect</span><span class="RktPn">)</span>, it does not
replace the previous property, but is combined with it to create a composite treatment.
Since there is seldom any need for a style author to replace a presentation property
after it being set, since only the shot vector transform can set it anyway, this auto-combination
approach is more useful.</p><h5>6.6.3.1<tt>&nbsp;</tt><a name="(part._shot_treatment)"></a><span class="RktSym">shot.treatment</span></h5><p>A shot&rsquo;s "treatment" is an effect that is applied to the media item prior to all other
style specified effects - i.e. treatments are the "inner most" effects applied to media.
Think "color treatment" and you&rsquo;re be roughly there.</p><h5>6.6.3.2<tt>&nbsp;</tt><a name="(part._shot_presenter)"></a><span class="RktSym">shot.presenter</span></h5><p>Intended to provide total control over the presentation of segments assigned to this shot.
A "presenter" function is of the form -</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">fn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">input-effect</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="hspace">&nbsp;</span><span class="RktVar">output-effect</span><span class="RktPn">)</span></p></blockquote><p>In other words, a presenter is an effect transformer, which takes an
effect (see <a href="About_effects_and_transitions.html" pltdoc="x">About effects and transitions</a>), munges it and returns
another. The simplest presenter is therefore the identity function.</p><p>At construction time, if a shot has a presenter set, the constructor will pass it
the effect specified using <span class="RktSym">muvee-segment-effect</span> and will use the effect
returned by the presenter in place of that specification. This allows a presenter
to override the segment effect for a single shot easily.</p><p>Presenters are combined at <span class="RktSym">put</span> time using simple function composition.</p><h5>6.6.3.3<tt>&nbsp;</tt><a name="(part._shot_entry-effect_and_shot_exit-effect)"></a><span class="RktSym">shot.entry-effect</span> and <span class="RktSym">shot.exit-effect</span></h5><p>These are effects and their composition behaves similar to <span class="RktSym">shot.treatment</span>.
The only difference is the times at which these effects are used.
The <span class="RktSym">shot.entry-effect</span> is applied in addition to the segment presentation
at the <span style="font-style: italic">beginning</span> of the first segment containing media from the shot. Similarly, the
<span class="RktSym">shot.exit-effect</span> is applied in addition to the segment presentation at the
<span style="font-style: italic">end</span> of the last segment containing media from the shot.</p><p>The constructor always shows media in the order specified in the media panel, therefore
all the other segments showing media from the shot are guaranteed to appear between the
segments containing exhibiting the entry effect and the exit effect.</p><h5>6.6.4<tt>&nbsp;</tt><a name="(part._.Utility_functions)"></a>Utility functions</h5><p>Some utility functions are provided for creating new kinds of shots for use within the
result shot vector. These allows a style to insert stock media, special algorithmically
driven segments, etc. Note that all new shot objects <span style="font-style: italic">must</span> be given valid shot ids.</p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">make-video</span><span class="hspace">&nbsp;</span><span class="RktVar">path-to-file</span><span class="hspace">&nbsp;</span><span class="RktVar">property-object</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">shot-object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path-to-file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">property-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">object</span></td></tr></table></div><div class="SIntrapara">Creates a video shot object with the properties as specified in the
        <span class="RktVar">property-object</span>.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">make-image</span><span class="hspace">&nbsp;</span><span class="RktVar">path-to-file</span><span class="hspace">&nbsp;</span><span class="RktVar">property-object</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">shot-object</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path-to-file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">property-object</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">object</span></td></tr></table></div><div class="SIntrapara">Creates a photo shot object with the properties as specified in the
        <span class="RktVar">property-object</span>. For photo shots, it is useful to specify the
        <span class="RktVal">'</span><span class="RktVal">min-duration-secs</span> property as in the example below -</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">make-image</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">resource</span><span class="hspace">&nbsp;</span><span class="RktVal">"stock/art.jpg"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">object</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktSym">shot.id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">min-duration-secs</span><span class="hspace">&nbsp;</span><span class="RktVal">20.0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Descriptor_matching.html" title="backward to &quot;6.5 Descriptor matching&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Specifying_Style_Behaviour.html" title="up to &quot;6 Specifying Style Behaviour&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Miscellany.html" title="forward to &quot;6.7 Miscellany&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>