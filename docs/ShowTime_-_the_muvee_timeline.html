<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>10&nbsp;ShowTime - the muvee timeline</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="musa.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Authoring muvee Styles</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="License.html" class="tocviewlink" pltdoc="x">License</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" pltdoc="x">Getting Started</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Style_Package_Structure.html" class="tocviewlink" pltdoc="x">Style Package Structure</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Anatomy_of_a_muvee.html" class="tocviewlink" pltdoc="x">Anatomy of a muvee</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Tutorials.html" class="tocviewlink" pltdoc="x">Tutorials</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Specifying_Style_Behaviour.html" class="tocviewlink" pltdoc="x">Specifying Style Behaviour</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="About_effects_and_transitions.html" class="tocviewlink" pltdoc="x">About effects and transitions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Sound_effects.html" class="tocviewlink" pltdoc="x">Sound effects</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="List_of_primitive_effects_and_transitions.html" class="tocviewlink" pltdoc="x">List of primitive effects and transitions</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Show<span class="mywbr"> </span>Time -<wbr></wbr> the muvee timeline</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Utility_functions.html" class="tocviewlink" pltdoc="x">Utility functions</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="A_Gentle_Introduction_to_muSE.html" class="tocviewlink" pltdoc="x">A Gentle Introduction to mu<span class="mywbr"> </span>SE</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>10&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Show<span class="mywbr"> </span>Time -<wbr></wbr> the muvee timeline</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">10.1&nbsp;</td><td><a href="#(part._video)" class="tocviewlink" pltdoc="x"><span class="RktSym">video</span></a></td></tr><tr><td align="right">10.2&nbsp;</td><td><a href="#(part._video-loop-track)" class="tocviewlink" pltdoc="x"><span class="RktSym">video-<wbr></wbr>loop-<wbr></wbr>track</span></a></td></tr><tr><td align="right">10.3&nbsp;</td><td><a href="#(part._with-inputs)" class="tocviewlink" pltdoc="x"><span class="RktSym">with-<wbr></wbr>inputs</span></a></td></tr><tr><td align="right">10.4&nbsp;</td><td><a href="#(part._.Lower_level_functions)" class="tocviewlink" pltdoc="x">Lower level functions</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">10.1<tt>&nbsp;</tt></span><a href="#(part._video)" class="tocsubseclink" pltdoc="x"><span class="RktSym">video</span></a></td></tr><tr><td><span class="tocsublinknumber">10.2<tt>&nbsp;</tt></span><a href="#(part._video-loop-track)" class="tocsubseclink" pltdoc="x"><span class="RktSym">video-<wbr></wbr>loop-<wbr></wbr>track</span></a></td></tr><tr><td><span class="tocsublinknumber">10.3<tt>&nbsp;</tt></span><a href="#(part._with-inputs)" class="tocsubseclink" pltdoc="x"><span class="RktSym">with-<wbr></wbr>inputs</span></a></td></tr><tr><td><span class="tocsublinknumber">10.4<tt>&nbsp;</tt></span><a href="#(part._.Lower_level_functions)" class="tocsubseclink" pltdoc="x">Lower level functions</a></td></tr><tr><td><span class="tocsublinknumber">10.4.1<tt>&nbsp;</tt></span><a href="#(part._mes_video)" class="tocsubseclink" pltdoc="x"><span class="RktSym">mes:<span class="mywbr"> </span>video</span></a></td></tr><tr><td><span class="tocsublinknumber">10.4.2<tt>&nbsp;</tt></span><a href="#(part._mes_image)" class="tocsubseclink" pltdoc="x"><span class="RktSym">mes:<span class="mywbr"> </span>image</span></a></td></tr><tr><td><span class="tocsublinknumber">10.4.3<tt>&nbsp;</tt></span><a href="#(part._.Working_with_image_data_during_construction)" class="tocsubseclink" pltdoc="x">Working with image data during construction</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="VolumetricLights.html" title="backward to &quot;9.45 VolumetricLights&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Authoring muvee Styles&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Utility_functions.html" title="forward to &quot;11 Utility functions&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>10<tt>&nbsp;</tt><a name="(part._.Show.Time_-_the_muvee_timeline)"></a>ShowTime - the muvee timeline</h3><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>This page needs a rewrite, but all the bits are there I think.</p></blockquote></blockquote></blockquote><p><a name="(tech._showtime)"></a><span style="font-style: italic">ShowTime</span> is our name for the timeline and rendering framework
that is responsible for previewing your muvees and for rendering them to
a file. <a href="#(tech._showtime)" class="techoutside" pltdoc="x"><span class="techinside">ShowTime</span></a> uses the industry standard OpenGL graphics API to
render the muvee.</p><p>The basic unit of a ShowTime timeline is a <a name="(tech._show)"></a><span style="font-style: italic">Show</span> which is,
broadly speaking, a function of time to a rendered frame. Every show
has an interval associated with it, outside of which it ceases to
influence the scene. A timeline is built by combining <a href="#(tech._show)" class="techoutside" pltdoc="x"><span class="techinside">Shows</span></a>
to form compound Shows. For example, two Shows which display two
different pictures can be combined with a <span style="font-style: italic">Cut</span> operator to
create a Show that will display picture <span class="RktSym">A</span> before time <span class="RktVar">t</span>
and picture <span class="RktSym">B</span> after time <span class="RktVar">t</span>.</p><p>A portion of the ShowTime framework is available for direct use by styles
so they can insert their own stock media into a muvee, such as a background
video. Here we describe the various functions that are available at the
lowest level of the effect framework and how to put them to great use.</p><h4>10.1<tt>&nbsp;</tt><a name="(part._video)"></a><span class="RktSym">video</span></h4><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">video</span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span><span class="RktVar">mstart</span><span class="hspace">&nbsp;</span><span class="RktVar">speed</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">Show</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mstart</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">speed</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr></table></div><div class="SIntrapara"><span class="RktSym">video</span> can be used to explicitly include style stock
video into the result timeline. It can be composed
using effects, layers, etc. just like any other source
video or photo clip.</div></p><p><div class="SIntrapara">A <span class="RktPn">(</span><span class="RktSym">video</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span> expression
evaluates to a function that can be used like a zero-input
effect to place the video clip as a layer in the scene.
The portion of the video that will be used is determined
by the <span class="RktVar">mstart</span> and <span class="RktVar">speed</span> parameters. For example,
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">background</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">video</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">resource</span><span class="hspace">&nbsp;</span><span class="RktVal">"background.wmv"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">16/9</span><span class="hspace">&nbsp;</span><span class="RktVal">7.0</span><span class="hspace">&nbsp;</span><span class="RktVal">1/2</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">will play the <span class="stt">"background.wmv"</span> video with 16/9 aspect ratio
starting from the 7.0 seconds at half speed. Since the function creates
a zero-input effect, the start and stop times aren&rsquo;t known yet. So
to insert this video into the timeline you instantiate the resultant effect
by providing the play interval, as follows -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">layers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">background</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">...other layers...</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">There is special support within the ShowTime muSE bindings for
using effect functions such as <span class="RktSym">background</span> that create Show objects
and don&rsquo;t take any inputs - i.e. their <a href="Primitive_effects.html#(tech._input._pattern)" class="techoutside" pltdoc="x"><span class="techinside">input pattern</span></a> is <span class="RktPn">(</span><span class="RktPn">)</span>.
In <span class="RktPn">(</span><span class="RktSym">input</span><span class="stt"> </span><span class="RktSym">N</span><span class="stt"> </span><span class="RktVar">xxx</span><span class="RktPn">)</span> and <span class="RktPn">(</span><span class="RktSym">layers</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span> expressions,
you can just use the function form without explicitly giving
the start and stop times. The start/stop times will
be automatically supplied from the context and the function will be
evaluated to get a Show. For example, the above layers expression can
be written equivalently as -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">layers</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">background</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">...other layers...</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h4>10.2<tt>&nbsp;</tt><a name="(part._video-loop-track)"></a><span class="RktSym">video-loop-track</span></h4><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><span class="RktSym">video-loop-track</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">file</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">aspect-ratio</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">start</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">mstart</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">mstop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">overlap</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">tx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">trk</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">track</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mstart</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mstop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">overlap</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">tx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">transition</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">trk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">track</span></td></tr></table></div><div class="SIntrapara">A video clip can be looped for a specific period during a muvee.
This can be during a segment effect or as a background video
for the entire muvee. <span class="RktSym">video-loop-track</span> creates an instance
of such a loop.</div></p><p><div class="SIntrapara">The video&rsquo;s path, aspect ratio and duration have to be known
before-hand. For transitions between the clips, use the
parameters <span class="RktVar">overlap</span> and <span class="RktVar">tx</span>, but ensure the transition
duration is less than half the video clip duration,
i.e.  </div><div class="SIntrapara"><blockquote><p><span style="font-style: italic"></span>0<span style="font-style: italic"> &lt;= overlap</span> and <span style="font-style: italic"> overlap &lt; </span>(<span style="font-style: italic">mstop - mstart</span>)<span style="font-style: italic">/</span>2<span style="font-style: italic"></span></p></blockquote></div></p><p><div class="SIntrapara">To loop a 10-second 16:9-format <span class="stt">"video.wmv"</span> with a
2-second crossfade between them, use this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">fn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">start</span><span class="hspace">&nbsp;</span><span class="RktVar">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">video-loop-track</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">resource</span><span class="hspace">&nbsp;</span><span class="RktVal">"video.wmv"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">16/9</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">start</span><span class="hspace">&nbsp;</span><span class="RktVar">stop</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="hspace">&nbsp;</span><span class="RktVal">10.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2.0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"CrossFade"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="hspace">&nbsp;</span><span class="RktSym">B</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The initial value of trk should be <span class="RktPn">(</span><span class="RktPn">)</span>. At the end of the
recursion, trk contains all the objects needed to create
the looping video. You may then use this within the
layers expression.</div></p><h4>10.3<tt>&nbsp;</tt><a name="(part._with-inputs)"></a><span class="RktSym">with-inputs</span></h4><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">with-inputs</span><span class="hspace">&nbsp;</span><span class="RktVar">inputs</span><span class="hspace">&nbsp;</span><span class="RktVar">fx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">layer</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">inputs</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">list-of-Shows</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">effect</span></td></tr></table></div><div class="SIntrapara">All the entries in a <span class="RktPn">(</span><span class="RktSym">layers</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span> expression must be
zero-input effects. Therefore it is a very frequent requirement
to take a specified effect and make it operate on the inputs of
the <span class="RktSym">layers</span> effect that&rsquo;s being constructed instead of
keeping its input pattern as free variables. You can use the
<span class="RktSym">with-inputs</span> function to supply the inputs for any effect
to turn it into a zero-input effect.</div></p><p>The <span class="RktSym">with-inputs</span> function evaluates to a zero-input effect
(i.e. a <font class="badlink"><span class="techoutside"><span class="techinside">layer</span></span></font>), binding the given inputs to the effect in the process.
This function is very useful within <span class="RktPn">(</span><span class="RktSym">layers</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span> expressions
to make N-input effects operate on the layers&rsquo; inputs.</p><h4>10.4<tt>&nbsp;</tt><a name="(part._.Lower_level_functions)"></a>Lower level functions</h4><h5>10.4.1<tt>&nbsp;</tt><a name="(part._mes_video)"></a><span class="RktSym">mes:video</span></h5><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><span class="RktSym">mes:video</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">aspect-ratio</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">mstart</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">mstop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">start</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stop</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">Show</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mstart</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mstop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Creates a video <span style="font-style: italic">Show</span> that can be used as a layer in a composition. <span class="RktVar">mstart</span> and <span class="RktVar">mstop</span> give the media interval to show and <span class="RktVar">start</span> and <span class="RktVar">stop</span> give the playback interval. If the media interval given is smaller than the playback interval, you get slow motion video and if it is larger, you get fast motion video. If <span class="RktVar">mstop</span> is a time before <span class="RktVar">mstart</span>, you get reversed video playback.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">mes:video</span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span><span class="RktVar">time-map</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">Show</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">time-map</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">list</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Similar to <span class="RktSym">mes:video</span> above, but provides for more flexible playback through the <span class="RktVar">time-map</span> argument. The time-map is a list of piece-wise-linear playback intervals - i.e. of the form
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">start1</span><span class="hspace">&nbsp;</span><span class="RktSym">stop1</span><span class="hspace">&nbsp;</span><span class="RktSym">mstart1</span><span class="hspace">&nbsp;</span><span class="RktSym">mstop1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start2=stop1</span><span class="hspace">&nbsp;</span><span class="RktSym">stop2</span><span class="hspace">&nbsp;</span><span class="RktSym">mstart2</span><span class="hspace">&nbsp;</span><span class="RktSym">mstop2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">start3=stop2</span><span class="hspace">&nbsp;</span><span class="RktSym">stop3</span><span class="hspace">&nbsp;</span><span class="RktSym">mstart3</span><span class="hspace">&nbsp;</span><span class="RktSym">mstop3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The playback intervals are expected to be increasing - i.e. the stop times <span style="font-style: italic">must</span> occur after the start times, but the media interval can be discontinuous as well as do reverse video.</div></p><h5>10.4.2<tt>&nbsp;</tt><a name="(part._mes_image)"></a><span class="RktSym">mes:image</span></h5><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">mes:image</span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span><span class="RktVar">start</span><span class="hspace">&nbsp;</span><span class="RktVar">stop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">Show</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Creates an image <span style="font-style: italic">Show</span> that can be used as a layer in a composition.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><span class="RktSym">mes:image</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">aspect-ratio</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">start</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stop</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">start-rectangle</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">end-rectangle</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">num-clockwise-rotations</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">Show</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">aspect-ratio</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start-rectangle</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tlx</span><span class="hspace">&nbsp;</span><span class="RktSym">tly</span><span class="hspace">&nbsp;</span><span class="RktSym">brx</span><span class="hspace">&nbsp;</span><span class="RktSym">bry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">end-rectangle</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tlx</span><span class="hspace">&nbsp;</span><span class="RktSym">tly</span><span class="hspace">&nbsp;</span><span class="RktSym">brx</span><span class="hspace">&nbsp;</span><span class="RktSym">bry</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">num-clockwise-rotations</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">integer</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Similar to above, but also specifies a "Ken Burns" animation rectangle pair
and the number of rotations to apply to the photo before presentation. The
rotation feature can be used to, for example, erect portrait photos which have
not been detected as such.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">mes:cached-image</span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span><span class="RktVar">size-indicator</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">size-indicator</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">_</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">This creates, if necessary, a lower resolution version of the specified
image and returns the path to that image. The low resolution image is
cached in Reveal&rsquo;s cache and won&rsquo;t need to be re-generated if requested
again for the same image.</div></p><p><div class="SIntrapara">The <span class="RktVar">size-indicator</span> can be one of -
</div><div class="SIntrapara"><ul><li><p><span class="RktPn">(</span><span class="RktPn">)</span> - meaning default cached image size, to a maximum of 2048x1024.</p></li><li><p><span class="RktPn">(</span><span class="RktSym">width</span><span class="stt"> </span><span class="RktSym">height</span><span class="RktPn">)</span> - giving the desired maximum dimensions of the cached image.</p></li><li><p>A number - then use the given number as the reduction factor for the image
  size relative to the default.</p></li></ul></div></p><h5>10.4.3<tt>&nbsp;</tt><a name="(part._.Working_with_image_data_during_construction)"></a>Working with image data during construction</h5><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">load-image</span><span class="hspace">&nbsp;</span><span class="RktVar">path-to-file</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">Image</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">path-to-file</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">string</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Loads and returns an object representing the pixels of an image
for use at construction time. You can use the <span class="RktSym">sample-image</span> function
described below to get at the pixels of the image.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">sample-image</span><span class="hspace">&nbsp;</span><span class="RktVar">image</span><span class="hspace">&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span><span class="RktVar">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">image</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">Image</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">y</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Gets a pixel from the given image located at the given relative x-y coordinate.
The x and y parameters are in the range 0 to 1 which map to the full width and height
of the image.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="boxed"><tr><td><span class="RktPn">(</span><span class="RktSym">select-points-using-image-weights</span><span class="hspace">&nbsp;</span><span class="RktVar">image</span><span class="hspace">&nbsp;</span><span class="RktVar">N</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">image</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">Image</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">N</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">integer</span></td></tr></table></div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">(New in Reveal X!)</span></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">Given an image, treats it as a weight distribution and selects <span class="RktVar">N</span> points
from the image according to that distribution. The resulting points expressed in
normalized coordinates (i.e. 0 to 1 range) are returned as a list of <span class="RktPn">(</span><span class="RktSym">x</span><span class="stt"> </span><span class="RktSym">y</span><span class="RktPn">)</span> values.</div></p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="VolumetricLights.html" title="backward to &quot;9.45 VolumetricLights&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Authoring muvee Styles&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Utility_functions.html" title="forward to &quot;11 Utility functions&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>