<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>5.3&nbsp;Putting a bounce into the Reflections style</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="musa.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Authoring muvee Styles</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="License.html" class="tocviewlink" pltdoc="x">License</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" pltdoc="x">Getting Started</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Style_Package_Structure.html" class="tocviewlink" pltdoc="x">Style Package Structure</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Anatomy_of_a_muvee.html" class="tocviewlink" pltdoc="x">Anatomy of a muvee</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Tutorials.html" class="tocviewselflink" pltdoc="x">Tutorials</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Specifying_Style_Behaviour.html" class="tocviewlink" pltdoc="x">Specifying Style Behaviour</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="About_effects_and_transitions.html" class="tocviewlink" pltdoc="x">About effects and transitions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Sound_effects.html" class="tocviewlink" pltdoc="x">Sound effects</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="List_of_primitive_effects_and_transitions.html" class="tocviewlink" pltdoc="x">List of primitive effects and transitions</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="ShowTime_-_the_muvee_timeline.html" class="tocviewlink" pltdoc="x">Show<span class="mywbr"> </span>Time -<wbr></wbr> the muvee timeline</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Utility_functions.html" class="tocviewlink" pltdoc="x">Utility functions</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="A_Gentle_Introduction_to_muSE.html" class="tocviewlink" pltdoc="x">A Gentle Introduction to mu<span class="mywbr"> </span>SE</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>5&nbsp;</td><td><a href="Tutorials.html" class="tocviewlink" pltdoc="x">Tutorials</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.1&nbsp;</td><td><a href="Adding_a_new_theme_to_Scrapbook.html" class="tocviewlink" pltdoc="x">Adding a new theme to <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Scrapbook</span></a></td></tr><tr><td align="right">5.2&nbsp;</td><td><a href="Basic_editing.html" class="tocviewlink" pltdoc="x">Basic editing</a></td></tr><tr><td align="right">5.3&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Putting a bounce into the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Reflections</span> style</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>5.3&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Putting a bounce into the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Reflections</span> style</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">5.3.1&nbsp;</td><td><a href="#(part._.S.T.A.G.E_1___.Preparation)" class="tocviewlink" pltdoc="x">STAGE 1 :<span class="mywbr"> </span> Preparation</a></td></tr><tr><td align="right">5.3.2&nbsp;</td><td><a href="#(part._.S.T.A.G.E_2___.Flight_check)" class="tocviewlink" pltdoc="x">STAGE 2 :<span class="mywbr"> </span> Flight check</a></td></tr><tr><td align="right">5.3.3&nbsp;</td><td><a href="#(part._.S.T.A.G.E_3___.The_elementary_bounce)" class="tocviewlink" pltdoc="x">STAGE 3 :<span class="mywbr"> </span> The elementary bounce</a></td></tr><tr><td align="right">5.3.4&nbsp;</td><td><a href="#(part._.Interlude__.Cut_hints)" class="tocviewlink" pltdoc="x">Interlude:<span class="mywbr"> </span> Cut hints</a></td></tr><tr><td align="right">5.3.5&nbsp;</td><td><a href="#(part._.S.T.A.G.E_4___.Bouncing_to_events_in_the_music_track_)" class="tocviewlink" pltdoc="x">STAGE 4 :<span class="mywbr"> </span> Bouncing to events in the music track.</a></td></tr><tr><td align="right">5.3.6&nbsp;</td><td><a href="#(part._.S.T.A.G.E_5___.Selecting_better_bounce_points)" class="tocviewlink" pltdoc="x">STAGE 5 :<span class="mywbr"> </span> Selecting better bounce points</a></td></tr><tr><td align="right">5.3.7&nbsp;</td><td><a href="#(part._.S.T.A.G.E_6___.Generating_a_better_bounce)" class="tocviewlink" pltdoc="x">STAGE 6 :<span class="mywbr"> </span> Generating a better bounce</a></td></tr><tr><td align="right">5.3.8&nbsp;</td><td><a href="#(part._.Beyond)" class="tocviewlink" pltdoc="x">Beyond</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">5.3.1<tt>&nbsp;</tt></span><a href="#(part._.S.T.A.G.E_1___.Preparation)" class="tocsubseclink" pltdoc="x">STAGE 1 :<span class="mywbr"> </span> Preparation</a></td></tr><tr><td><span class="tocsublinknumber">5.3.2<tt>&nbsp;</tt></span><a href="#(part._.S.T.A.G.E_2___.Flight_check)" class="tocsubseclink" pltdoc="x">STAGE 2 :<span class="mywbr"> </span> Flight check</a></td></tr><tr><td><span class="tocsublinknumber">5.3.3<tt>&nbsp;</tt></span><a href="#(part._.S.T.A.G.E_3___.The_elementary_bounce)" class="tocsubseclink" pltdoc="x">STAGE 3 :<span class="mywbr"> </span> The elementary bounce</a></td></tr><tr><td><span class="tocsublinknumber">5.3.4<tt>&nbsp;</tt></span><a href="#(part._.Interlude__.Cut_hints)" class="tocsubseclink" pltdoc="x">Interlude:<span class="mywbr"> </span> Cut hints</a></td></tr><tr><td><span class="tocsublinknumber">5.3.5<tt>&nbsp;</tt></span><a href="#(part._.S.T.A.G.E_4___.Bouncing_to_events_in_the_music_track_)" class="tocsubseclink" pltdoc="x">STAGE 4 :<span class="mywbr"> </span> Bouncing to events in the music track.</a></td></tr><tr><td><span class="tocsublinknumber">5.3.6<tt>&nbsp;</tt></span><a href="#(part._.S.T.A.G.E_5___.Selecting_better_bounce_points)" class="tocsubseclink" pltdoc="x">STAGE 5 :<span class="mywbr"> </span> Selecting better bounce points</a></td></tr><tr><td><span class="tocsublinknumber">5.3.7<tt>&nbsp;</tt></span><a href="#(part._.S.T.A.G.E_6___.Generating_a_better_bounce)" class="tocsubseclink" pltdoc="x">STAGE 6 :<span class="mywbr"> </span> Generating a better bounce</a></td></tr><tr><td><span class="tocsublinknumber">5.3.8<tt>&nbsp;</tt></span><a href="#(part._.Beyond)" class="tocsubseclink" pltdoc="x">Beyond</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Basic_editing.html" title="backward to &quot;5.2 Basic editing&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Tutorials.html" title="up to &quot;5 Tutorials&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Specifying_Style_Behaviour.html" title="forward to &quot;6 Specifying Style Behaviour&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>5.3<tt>&nbsp;</tt><a name="(part._.Putting_a_.Bounce_into_.Reflections)"></a>Putting a bounce into the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Reflections</span> style</h4><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span style="font-weight: bold">Tip:</span> Copy-paste the tutorial URL into the muveeStyleBrowser&rsquo;s
     address box to get the styles for the various stages.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara"><span style="font-weight: bold">Tutorial URL:</span> <a href="http://muvee-style-authoring.googlecode.com/svn/trunk/tutorials/ReflectionsWithABounce/">tutorials/ReflectionsWithABounce</a></div></p><p>The <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Reflections</span> style that comes with muvee Reveal, by design,
does not react much to the music track. We&rsquo;ll use that as an opportunity and
make pictures bounce to music. In the process, you&rsquo;ll learn about
animating effect parameters and how to access information about the music
track and use that information to determine an effect&rsquo;s behaviour.</p><p>This tutorial needs you to be familiar with <a href="Getting_Started.html" pltdoc="x">Getting Started</a>.
We&rsquo;ll also be getting into some depth coding up effect animations in muSE, so
it helps to familiarize yourself with (at least) the basics of muSE in
<a href="A_Gentle_Introduction_to_muSE.html" pltdoc="x">A Gentle Introduction to muSE</a>.</p><table cellspacing="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.S.T.A.G.E_1___.Preparation)" class="toclink" pltdoc="x">5.3.1<span class="hspace">&nbsp;</span>STAGE 1 : Preparation</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.S.T.A.G.E_2___.Flight_check)" class="toclink" pltdoc="x">5.3.2<span class="hspace">&nbsp;</span>STAGE 2 : Flight check</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.S.T.A.G.E_3___.The_elementary_bounce)" class="toclink" pltdoc="x">5.3.3<span class="hspace">&nbsp;</span>STAGE 3 : The elementary bounce</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Interlude__.Cut_hints)" class="toclink" pltdoc="x">5.3.4<span class="hspace">&nbsp;</span>Interlude: Cut hints</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.S.T.A.G.E_4___.Bouncing_to_events_in_the_music_track_)" class="toclink" pltdoc="x">5.3.5<span class="hspace">&nbsp;</span>STAGE 4 : Bouncing to events in the music track.</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.S.T.A.G.E_5___.Selecting_better_bounce_points)" class="toclink" pltdoc="x">5.3.6<span class="hspace">&nbsp;</span>STAGE 5 : Selecting better bounce points</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.S.T.A.G.E_6___.Generating_a_better_bounce)" class="toclink" pltdoc="x">5.3.7<span class="hspace">&nbsp;</span>STAGE 6 : Generating a better bounce</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Beyond)" class="toclink" pltdoc="x">5.3.8<span class="hspace">&nbsp;</span>Beyond</a></p></td></tr></table><h5>5.3.1<tt>&nbsp;</tt><a name="(part._.S.T.A.G.E_1___.Preparation)"></a>STAGE 1 : Preparation</h5><p><span style="font-weight: bold">Style:</span> <a href="http://muvee-style-authoring.googlecode.com/svn/trunk/tutorials/ReflectionsWithABounce/S10000_ReflectionsWithABounce_Stage1/">S10000_ReflectionsWithABounce_Stage1</a></p><p><div class="SIntrapara">Copy the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Reflections</span> style. See <a href="Getting_Started.html" pltdoc="x">Getting Started</a> if you
don&rsquo;t know how to do that.
</div><div class="SIntrapara"><blockquote><p><span style="font-weight: bold">Style id:</span> <span class="stt">S10000_ReflectionsWithABounce</span></p></blockquote></div><div class="SIntrapara"><blockquote><p><span style="font-weight: bold">Style name:</span> Reflections with a bounce</p></blockquote></div><div class="SIntrapara"><blockquote><p><span style="font-weight: bold">Style description:</span> Your pictures bounce to the music on a reflecting surface.</p></blockquote></div></p><p>Launch muvee Reveal, add some pictures to the media panel and select your
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Reflections with a bounce</span> style.</p><h5>5.3.2<tt>&nbsp;</tt><a name="(part._.S.T.A.G.E_2___.Flight_check)"></a>STAGE 2 : Flight check</h5><p><span style="font-weight: bold">Style:</span> <a href="http://muvee-style-authoring.googlecode.com/svn/trunk/tutorials/ReflectionsWithABounce/S10000_ReflectionsWithABounce_Stage2/">S10000_ReflectionsWithABounce_Stage2</a></p><p>In order to bounce the pictures, we need to <span style="font-style: italic">move</span> it up and down in a
specific pattern. We therefore need to use the <a href="Translate.html" pltdoc="x">Translate</a> effect
on the pictures, animating the <span class="RktSym">y</span> parameter to do the bounce.</p><p>We first do a simple exercise to make sure we can translate pictures
correctly - we just move the pictures from the reflecting floor by
a fixed amount. Keeping in mind that positive values of <span class="RktSym">y</span>
give you upward movement and negative values give you downward movement,
we apply a <a href="Translate.html" pltdoc="x">Translate</a> effect on the pictures with a <span class="RktSym">y</span>
value of <span class="RktVal">0.2</span>.</p><p>We want to apply the translation to each picture *before* it is placed
on the reflecting surface and the paraphernalia (stars, circles, etc.)
get added. We therefore need to look for <span class="RktSym">muvee-segment-effect</span>
and insert the translation at the segment level.</p><p><span style="font-weight: bold">Segment level effects</span></p><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Refs: <a href="Anatomy_of_a_muvee.html" pltdoc="x">Anatomy of a muvee</a>, <a href="Applications_of_effects.html#(part._.The_segment_effect)" pltdoc="x">The segment effect</a></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">In a muvee, portions of input media such as pictures and video clips are
presented by themselves as <span style="font-style: italic">segments</span>. For example, if you add a bunch
of pictures to the media panel, each picture gets shown for a few seconds
and then the style moves on to the next picture. Each of those occurrences
is called a <span style="font-style: italic">segment</span> and the way a segment gets presented is
dictated by <span class="RktSym">muvee-segment-effect</span>.</div></p><ul><li><p>From the muveeStyleBrowser, open your style&rsquo;s <span class="stt">"data.scm"</span>
file by right clicking on your style and selecting <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Edit data.scm</span>.
For the rest of the tutorial, you can keep muvee Reveal and your
text editor for the <span class="stt">"data.scm"</span> file open simultaneously.</p></li><li><p>Locate the definition point of <span class="RktSym">muvee-segment-effect</span> in the
<span class="stt">"data.scm"</span> file.</p></li></ul><p><div class="SIntrapara">You should be looking at the following piece of code -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect-stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">reflection-and-polygons-fx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">captions-fx</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>The <span class="RktSym">captions-fx</span> specifies how to place a picture&rsquo;s captions on it
and the <span class="RktSym">reflection-and-polygons-fx</span> specifies that the picture together
with it caption text has to be reflected on a shiny surface and should have
some sprites moving about on the floor.</p><ul><li><p><div class="SIntrapara">Add a <span class="RktSym">bounce</span> definition and insert it into the <span class="RktSym">effect-stack</span>
as shown below -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">---- Add the following definition ----</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">--------------------------------------</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect-stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">reflection-and-polygons-fx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">captions-fx</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;&lt;-- Remove )) from this line.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">bounce</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;&lt;-- Add this line.</span></td></tr></table></blockquote></div></p></li><li><p>Save your <span class="stt">"data.scm"</span> file and click the play button in muvee Reveal
while holding down the Shift key. Notice that the picture now floats above
the floor instead of sitting on it. So <span class="RktVal">"Translate"</span> works just
as it should.</p></li></ul><p><span style="font-weight: bold">The location of <span class="RktSym">bounce</span> in the <span class="RktSym">effect-stack</span></span></p><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Ref: <a href="Combining_effects.html#(part._effect-stack)" pltdoc="x">effect-stack</a></p></blockquote></blockquote></blockquote></div><div class="SIntrapara">We put the <span class="RktSym">bounce</span> at the end of the <span class="RktSym">effect-stack</span>. Doing so
shifts the pictures first, then places captions (relative to the original
unshifted picture location) and then reflects the entire scene on the shiny
floor.</div></p><p><div class="SIntrapara">Try changing the position of <span class="RktSym">bounce</span> within the <span class="RktSym">effect-stack</span>.
What do you get when you do this -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">effect-stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">reflection-and-polygons-fx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">captions-fx</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">or this instead -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">effect-stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">reflection-and-polygons-fx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">captions-fx</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>(You will need to add some caption text for a picture to tell the difference
between placing <span class="RktSym">bounce</span> before and after <span class="RktSym">captions-fx</span>.)</p><p>You&rsquo;ve now got the basic stuff in place. Further on, we&rsquo;ll focus on
exactly how to generate the bounce that we&rsquo;re looking for.</p><h5>5.3.3<tt>&nbsp;</tt><a name="(part._.S.T.A.G.E_3___.The_elementary_bounce)"></a>STAGE 3 : The elementary bounce</h5><p><span style="font-weight: bold">Style:</span> <a href="http://muvee-style-authoring.googlecode.com/svn/trunk/tutorials/ReflectionsWithABounce/S10000_ReflectionsWithABounce_Stage3/">S10000_ReflectionsWithABounce_Stage3</a></p><p>If you plot the height of a bouncing object against time, it will
look like the following graph -</p><p><img src="bounce-curve.png" alt="" /></p><p><div class="SIntrapara">We can try to create such a bounce by hand as follows -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><a href="Primitive_effects.html#(part._explicit-animation-curves)" pltdoc="x"><span class="RktSym">linear</span></a><span class="hspace">&nbsp;</span><span class="RktVal">0.1</span><span class="hspace">&nbsp;</span><span class="RktVal">0.19</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktVal">0.17</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.3</span><span class="hspace">&nbsp;</span><span class="RktVal">0.13</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.4</span><span class="hspace">&nbsp;</span><span class="RktVal">0.07</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.6</span><span class="hspace">&nbsp;</span><span class="RktVal">0.07</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.7</span><span class="hspace">&nbsp;</span><span class="RktVal">0.13</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.8</span><span class="hspace">&nbsp;</span><span class="RktVal">0.17</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">0.9</span><span class="hspace">&nbsp;</span><span class="RktVal">0.19</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara">... but that&rsquo;s too tedious and we won&rsquo;t be able to synchronize
to music. So lets help ourselves and define a bounce animation
function that will put in all those <span class="RktSym">linear</span> animations for us.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><a href="A_Gentle_Introduction_to_muSE.html#(part._.Recursive_functions)" pltdoc="x"><span class="RktSym">bounce-anim</span></a><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">time</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><a href="A_Gentle_Introduction_to_muSE.html#(part._.Temporary_names_using_let)" pltdoc="x"><span class="RktSym">let</span></a><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktSym">time</span><span class="hspace">&nbsp;</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><a href="A_Gentle_Introduction_to_muSE.html#(part._.Conditional_evaluation)" pltdoc="x"><span class="RktSym">if</span></a><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span style="font-weight: bold"><span class="RktSym">linear</span></span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><a href="A_Gentle_Introduction_to_muSE.html#(part._.Recursive_functions)" pltdoc="x"><span class="RktSym">bounce-anim</span></a><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">time</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span style="font-weight: bold"><span class="RktSym">linear</span></span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Height</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Convert from relative time to absolute time using progress function.</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><a href="Primitive_effects.html#(part._.Time_specification)" pltdoc="x"><span class="RktSym">progress</span></a><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Start time</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span><span class="RktPn">)</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Stop time</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Initial time</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">20 animation points per second.</span></td></tr></table></blockquote></div></p><p>The <span class="RktSym">bounce-anim</span> function generates one bounce of height
<span class="RktSym">height</span> starting from absolute time <span class="RktSym">start</span> and
ending at absolute time <span class="RktSym">stop</span> in steps of <span class="RktSym">dt</span>.
The <span class="RktSym">time</span> parameter is just to keep track of progress
over the animation.</p><p>If you tried that out, you&rsquo;d have found the bounce to be really slow.
Lets speed it up by doing many bounces for each picture -</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.6</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.6</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.7</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.6</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.7</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.8</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.7</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.8</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.9</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktVal">0.8</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>We&rsquo;re now able to generate multiple bounces for each picture, with the
bounce points at the time of our choice. Now, all that&rsquo;s left is to
align the times to appropriate events in the music track.</p><h5>5.3.4<tt>&nbsp;</tt><a name="(part._.Interlude__.Cut_hints)"></a>Interlude: Cut hints</h5><p>When muvee Reveal analyzes a music file, it detects events such as drum hits. For each such
detected event, it records a time-value pair, where the time says when the event occurred
and the value (in the range 0.0 to 1.0) says how strong the event is. The events
based on broad spectrum analysis of the music data are called <span style="font-style: italic">cut hints</span>. You can access
this data in a style using the <a href="Controlling_a_style_s_music_response.html#(part._.Music_descriptors)" pltdoc="x"><span class="RktSym">cut-hints</span></a> function.
Although cut hints are computed per music file, the <span class="RktSym">cut-hints</span> function consolidates
the hints for all the music files used in the muvee&rsquo;s music track.</p><p><div class="SIntrapara">For example, <span class="RktPn">(</span><span class="RktSym">cut-hints</span><span class="stt"> </span><span class="RktVal">2.0</span><span class="stt"> </span><span class="RktVal">5.0</span><span class="RktPn">)</span> extracts the cut hints between 2.0 seconds
and 5.0 seconds into the muvee and might give you a list like -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">2.3</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">0.2</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">3.5</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">0.7</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">4.5</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">0.1</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote></div></p><p>Within an <span class="RktSym">effect</span> expression, you can use the <span class="RktVar">start</span> and <span class="RktVar">stop</span> implicit
parameters to access the time interval during which the effect will be active.
You can therefore extract the cut hints using - <span class="RktPn">(</span><span class="RktSym">cut-hints</span><span class="stt"> </span><span class="RktSym">start</span><span class="stt"> </span><span class="RktSym">stop</span><span class="RktPn">)</span>.</p><h5>5.3.5<tt>&nbsp;</tt><a name="(part._.S.T.A.G.E_4___.Bouncing_to_events_in_the_music_track_)"></a>STAGE 4 : Bouncing to events in the music track.</h5><p><span style="font-weight: bold">Style:</span> <a href="http://muvee-style-authoring.googlecode.com/svn/trunk/tutorials/ReflectionsWithABounce/S10000_ReflectionsWithABounce_Stage4/">S10000_ReflectionsWithABounce_Stage4</a></p><p>We want to generate one bounce between every two consecutive cut hints within
a picture&rsquo;s presentation interval. That way, the bounce point will synchronize
with the cut hint. But in order to get cut-hints, we need a music track.
So go ahead and add some music now. For lack of a better suggestion, you can add the
sample music that comes with muvee Reveal which you can find in your "Music"
folder. Make sure you put in about 15 pictures for every minute of music that
you add.</p><p><div class="SIntrapara">Given a cut-hints list such as </div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">2.3</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">0.2</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">3.5</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">0.7</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">4.5</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">0.1</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote></div><div class="SIntrapara">we need to generate a matching number of <span class="RktSym">bounce-anim</span> expressions like we
did above in stage 3. We can, again, define a function to make the repeated calls.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">case</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">hints*</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">hints*</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">Now we just have to use <span class="RktSym">bounce-to-hints</span> in our <span class="RktSym">bounce</span>
effect to generate the animations.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">start</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">stop</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cut-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Make some muvees with different music tracks and watch the pictures bounce
to the beat points.</p><h5>5.3.6<tt>&nbsp;</tt><a name="(part._.S.T.A.G.E_5___.Selecting_better_bounce_points)"></a>STAGE 5 : Selecting better bounce points</h5><p><span style="font-weight: bold">Style:</span> <a href="http://muvee-style-authoring.googlecode.com/svn/trunk/tutorials/ReflectionsWithABounce/S10000_ReflectionsWithABounce_Stage5/">S10000_ReflectionsWithABounce_Stage5</a></p><p>At the end of stage 4, you&rsquo;ll notice that on some occasions there may be too many
bounces or the bounces may be too close to each other for taste. In this stage,
we&rsquo;ll work on selecting a nice set of bounce points for each picture.</p><p><div class="SIntrapara">There are many ways to filter hints. For example-
</div><div class="SIntrapara"><ul><li><p>Select only the hints whose strength is above a certain threshold.</p></li><li><p>Limit the number of hints selected for each picture, according to the
hint strength - i.e. pick the <span class="RktSym">N</span> strongest hints for a fixed <span class="RktSym">N</span>.</p></li><li><p>Set a lower limit on the time difference between two consecutive hints.</p></li></ul></div><div class="SIntrapara">You can even combine many of these techniques, but for illustration, we&rsquo;ll
use the second approach - i.e. limit the number of hints per picture. In our
case, this limits the number of times we allow a picture to bounce. We do this
by first sorting the hints according to decreasing order of their strengths,
picking a dozen of the strongest from them and then resorting the hints into
time order.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">select-strongest-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span><span class="hspace">&nbsp;</span><span class="RktSym">N</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">strongest-to-weakest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sort</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">N-strongest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">take</span><span class="hspace">&nbsp;</span><span class="RktSym">N</span><span class="hspace">&nbsp;</span><span class="RktSym">strongest-to-weakest</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time-order</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sort</span><span class="hspace">&nbsp;</span><span class="RktSym">N-strongest</span><span class="hspace">&nbsp;</span><span class="RktSym">first</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">time-order</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">start</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">stop</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">select-strongest-hints</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cut-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><h5>5.3.7<tt>&nbsp;</tt><a name="(part._.S.T.A.G.E_6___.Generating_a_better_bounce)"></a>STAGE 6 : Generating a better bounce</h5><p><span style="font-weight: bold">Style:</span> <a href="http://muvee-style-authoring.googlecode.com/svn/trunk/tutorials/ReflectionsWithABounce/S10000_ReflectionsWithABounce_Stage6/">S10000_ReflectionsWithABounce_Stage6</a></p><p>The bounce we have at this point is not very physical. For one thing,
the bounce speed seems to vary from one bounce to the next whereas natural
objects don&rsquo;t do that. For natural objects, the bounce duration will be
longer only if it bounces higher. The solution to this is therefore quite simple.
We make the height of the bounce proportionate to its duration.</p><p>Change the definition of <span class="RktSym">bounce-to-hints</span> to -</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dur-&gt;height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktVal">5.0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">case</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dur-&gt;height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">hints*</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dur-&gt;height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">hints*</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>.. and the definition of <span class="RktSym">bounce</span> will have to now
drop the height parameter to <span class="RktSym">bounce-to-hints</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">start</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">stop</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">select-strongest-hints</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cut-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">And just for completion, here is the entire bit of
custom code you need to add to the Reflections style
to get your pictures bouncing -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">time</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">time</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktSym">height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">time</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">linear</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dur-&gt;height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktVal">5.0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">case</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dur-&gt;height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">hints*</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-anim</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dur-&gt;height</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="hspace">&nbsp;</span><span class="RktSym">hints*</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">select-strongest-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span><span class="hspace">&nbsp;</span><span class="RktSym">N</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">strongest-to-weakest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sort</span><span class="hspace">&nbsp;</span><span class="RktSym">hints</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">N-strongest</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">take</span><span class="hspace">&nbsp;</span><span class="RktSym">N</span><span class="hspace">&nbsp;</span><span class="RktSym">strongest-to-weakest</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time-order</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sort</span><span class="hspace">&nbsp;</span><span class="RktSym">N-strongest</span><span class="hspace">&nbsp;</span><span class="RktSym">first</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">time-order</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">bounce</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bounce-to-hints</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">start</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">stop</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">select-strongest-hints</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cut-hints</span><span class="hspace">&nbsp;</span><span class="RktSym">start</span><span class="hspace">&nbsp;</span><span class="RktSym">stop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">1/20</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect-stack</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">reflection-and-polygons-fx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">captions-fx</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">bounce</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5>5.3.8<tt>&nbsp;</tt><a name="(part._.Beyond)"></a>Beyond</h5><p><div class="SIntrapara">Feel free to play around and customize the bounce according to your
own taste. Here are a few things to try -
</div><div class="SIntrapara"><ul><li><p>Make the pictures bounce higher if the bounce starts on
a strong hint value.</p></li><li><p>Filter out hints that are too close to each other. One approach
is to use a time threshold, but you can also try
varying the time threshold depending on hint strength value.</p></li><li><p>Use similar techniques to twist the pictures instead of bouncing
them on the floor.</p></li></ul></div></p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Basic_editing.html" title="backward to &quot;5.2 Basic editing&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Tutorials.html" title="up to &quot;5 Tutorials&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Specifying_Style_Behaviour.html" title="forward to &quot;6 Specifying Style Behaviour&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>