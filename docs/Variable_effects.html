<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>7.4&nbsp;Variable effects</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><link rel="stylesheet" type="text/css" href="musa.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Authoring muvee Styles</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="License.html" class="tocviewlink" pltdoc="x">License</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Getting_Started.html" class="tocviewlink" pltdoc="x">Getting Started</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Style_Package_Structure.html" class="tocviewlink" pltdoc="x">Style Package Structure</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Anatomy_of_a_muvee.html" class="tocviewlink" pltdoc="x">Anatomy of a muvee</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Tutorials.html" class="tocviewlink" pltdoc="x">Tutorials</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Specifying_Style_Behaviour.html" class="tocviewlink" pltdoc="x">Specifying Style Behaviour</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="About_effects_and_transitions.html" class="tocviewselflink" pltdoc="x">About effects and transitions</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Sound_effects.html" class="tocviewlink" pltdoc="x">Sound effects</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="List_of_primitive_effects_and_transitions.html" class="tocviewlink" pltdoc="x">List of primitive effects and transitions</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="ShowTime_-_the_muvee_timeline.html" class="tocviewlink" pltdoc="x">Show<span class="mywbr"> </span>Time -<wbr></wbr> the muvee timeline</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Utility_functions.html" class="tocviewlink" pltdoc="x">Utility functions</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="A_Gentle_Introduction_to_muSE.html" class="tocviewlink" pltdoc="x">A Gentle Introduction to mu<span class="mywbr"> </span>SE</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>7&nbsp;</td><td><a href="About_effects_and_transitions.html" class="tocviewlink" pltdoc="x">About effects and transitions</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">7.1&nbsp;</td><td><a href="Introduction.html" class="tocviewlink" pltdoc="x">Introduction</a></td></tr><tr><td align="right">7.2&nbsp;</td><td><a href="Primitive_effects.html" class="tocviewlink" pltdoc="x">Primitive effects</a></td></tr><tr><td align="right">7.3&nbsp;</td><td><a href="Combining_effects.html" class="tocviewlink" pltdoc="x">Combining effects</a></td></tr><tr><td align="right">7.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Variable effects</a></td></tr><tr><td align="right">7.5&nbsp;</td><td><a href="Music_triggered_effects.html" class="tocviewlink" pltdoc="x">Music triggered effects</a></td></tr><tr><td align="right">7.6&nbsp;</td><td><a href="Transitions.html" class="tocviewlink" pltdoc="x">Transitions</a></td></tr><tr><td align="right">7.7&nbsp;</td><td><a href="Segment_information_functions.html" class="tocviewlink" pltdoc="x">Segment information functions</a></td></tr><tr><td align="right">7.8&nbsp;</td><td><a href="Source_information_functions.html" class="tocviewlink" pltdoc="x">Source information functions</a></td></tr><tr><td align="right">7.9&nbsp;</td><td><a href="Render_information.html" class="tocviewlink" pltdoc="x">Render information</a></td></tr><tr><td align="right">7.10&nbsp;</td><td><a href="Unit_helper_functions.html" class="tocviewlink" pltdoc="x">Unit helper functions</a></td></tr><tr><td align="right">7.11&nbsp;</td><td><a href="Getting_into_deep_waters.html" class="tocviewlink" pltdoc="x">Getting into deep waters</a></td></tr><tr><td align="right">7.12&nbsp;</td><td><a href="A_note_on_Image_Operators.html" class="tocviewlink" pltdoc="x">A note on <a name="(tech._image._operator)"></a><span style="font-style: italic">Image Operators</span></a></td></tr><tr><td align="right">7.13&nbsp;</td><td><a href="Applications_of_effects.html" class="tocviewlink" pltdoc="x">Applications of effects</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>7.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Variable effects</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">7.4.1&nbsp;</td><td><a href="#(part._.Using_computed_parameter_values)" class="tocviewlink" pltdoc="x">Using computed parameter values</a></td></tr><tr><td align="right">7.4.2&nbsp;</td><td><a href="#(part._.Using_sequences)" class="tocviewlink" pltdoc="x">Using sequences</a></td></tr><tr><td align="right">7.4.3&nbsp;</td><td><a href="#(part._.Using_effect-selector)" class="tocviewlink" pltdoc="x">Using <span class="RktSym">effect-<wbr></wbr>selector</span></a></td></tr><tr><td align="right">7.4.4&nbsp;</td><td><a href="#(part._.Responding_to_music_descriptors)" class="tocviewlink" pltdoc="x">Responding to music descriptors</a></td></tr><tr><td align="right">7.4.5&nbsp;</td><td><a href="#(part._.Using_special_conditionals)" class="tocviewlink" pltdoc="x">Using special conditionals</a></td></tr><tr><td align="right">7.4.6&nbsp;</td><td><a href="#(part._.Controlling_effects_with_style_parameters)" class="tocviewlink" pltdoc="x">Controlling effects with style parameters</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">7.4.1<tt>&nbsp;</tt></span><a href="#(part._.Using_computed_parameter_values)" class="tocsubseclink" pltdoc="x">Using computed parameter values</a></td></tr><tr><td><span class="tocsublinknumber">7.4.2<tt>&nbsp;</tt></span><a href="#(part._.Using_sequences)" class="tocsubseclink" pltdoc="x">Using sequences</a></td></tr><tr><td><span class="tocsublinknumber">7.4.3<tt>&nbsp;</tt></span><a href="#(part._.Using_effect-selector)" class="tocsubseclink" pltdoc="x">Using <span class="RktSym">effect-<wbr></wbr>selector</span></a></td></tr><tr><td><span class="tocsublinknumber">7.4.4<tt>&nbsp;</tt></span><a href="#(part._.Responding_to_music_descriptors)" class="tocsubseclink" pltdoc="x">Responding to music descriptors</a></td></tr><tr><td><span class="tocsublinknumber">7.4.5<tt>&nbsp;</tt></span><a href="#(part._.Using_special_conditionals)" class="tocsubseclink" pltdoc="x">Using special conditionals</a></td></tr><tr><td><span class="tocsublinknumber">7.4.6<tt>&nbsp;</tt></span><a href="#(part._.Controlling_effects_with_style_parameters)" class="tocsubseclink" pltdoc="x">Controlling effects with style parameters</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Combining_effects.html" title="backward to &quot;7.3 Combining effects&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="About_effects_and_transitions.html" title="up to &quot;7 About effects and transitions&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Music_triggered_effects.html" title="forward to &quot;7.5 Music triggered effects&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>7.4<tt>&nbsp;</tt><a name="(part._.Variable_effects)"></a>Variable effects</h4><p>The value of an effect&rsquo;s parameter can vary over the effect&rsquo;s interval by
specifying <a href="Primitive_effects.html#(part._explicit-animation-curves)" pltdoc="x">explicit</a> or
<a href="Primitive_effects.html#(part._computed-param-animation)" pltdoc="x">computed</a> animations. Beyond that,
you can control how the various instances of an effect specification
differ from each other. This variation technique is indispensable if you
want to sustain the interest of your viewers.</p><p>Here are a few ways in which you can infuse such variety in your
productions.</p><h5>7.4.1<tt>&nbsp;</tt><a name="(part._.Using_computed_parameter_values)"></a>Using computed parameter values</h5><p>Any expression you use to specify the value of an effect&rsquo;s parameter is
computed once per effect instance. This gives you an opportunity to vary
the value of a parameter between the instances. The simplest such variation
is to set the value of a parameter to a random number in a given range.
You can, for example, set a random translation value for the <span class="RktSym">Translate</span>
effect&rsquo;s <span class="RktSym">x</span> parameter as follows -</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"x"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktVal">0.3</span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>If the above effect is used as a <span class="RktSym">muvee-segment-effect</span>, you&rsquo;ll
find each segment of the muvee space shifted by a different amount.</p><p>You can use any expression that will evaluate to different values
every time it is evaluated in order to generate variations in the
value of a parameter.</p><h5>7.4.2<tt>&nbsp;</tt><a name="(part._.Using_sequences)"></a>Using sequences</h5><p><div class="SIntrapara">The style authoring library comes with three functions for creating
sequences of things. These are -
</div><div class="SIntrapara"><ul><li><p><span class="RktPn">(</span><span class="RktSym">looping-sequence</span><span class="stt"> </span><span class="RktVar">e1</span><span class="stt"> </span><span class="RktVar">e2</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span></p></li><li><p><span class="RktPn">(</span><span class="RktSym">random-sequence</span><span class="stt"> </span><span class="RktVar">e1</span><span class="stt"> </span><span class="RktVar">e2</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span></p></li><li><p><span class="RktPn">(</span><span class="RktSym">shuffled-sequence</span><span class="stt"> </span><span class="RktVar">e1</span><span class="stt"> </span><span class="RktVar">e2</span><span class="stt"> </span><span class="RktSym">....</span><span class="RktPn">)</span></p></li></ul></div><div class="SIntrapara">They all give you a function that should called with no arguments.
These functions return different values every time they are called.
The <span class="RktVar">e1</span>, <span class="RktVar">e2</span>, etc. can be any kind of muSE object.</div></p><p><div class="SIntrapara">Here is a trivial example -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">beat</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">looping-sequence</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">beat</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will give you 1</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">beat</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will give you 2</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">beat</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will give you 3</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">beat</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will give you 4</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">beat</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will give you 1</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">beat</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">will give you 2</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">.... and so on.</span></td></tr></table></blockquote></div></p><p>The <span class="RktSym">random-sequence</span> form yields a function that might return
any one of the values when it is invoked, with equal probability. The
<span class="RktSym">shuffled-sequence</span> is similar, but ensures that each item is
used once before repeating them.</p><p><div class="SIntrapara">You can use the generated <span style="font-style: italic">sequence functions</span> to set the parameters
in effect specifications. For example, the definitions -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">left-to-right</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">looping-sequence</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-0</span>.4</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-0</span>.1</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"x"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left-to-right</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">will give you a looping left to right shift from segment to segment over
the course of the muvee. This assumes that effects for segments are
calculated starting from the first segment at the start of the muvee
and proceeding to subsequent segments one by one, which is guaranteed.</div></p><h5>7.4.3<tt>&nbsp;</tt><a name="(part._.Using_effect-selector)"></a>Using <span class="RktSym">effect-selector</span></h5><p><div class="SIntrapara">Check this out -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-segment-effect</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect-selector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">random-sequence</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Translate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"x"</span><span class="hspace">&nbsp;</span><span class="RktVal">0.2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Rotate"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"degrees"</span><span class="hspace">&nbsp;</span><span class="RktVal">30.0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Scale"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"x"</span><span class="hspace">&nbsp;</span><span class="RktVal">1.5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">will use one of the three effects - <span class="RktSym">Translate</span>, <span class="RktSym">Rotate</span>
and <span class="RktSym">Scale</span> - for each segment of the muvee, randomly.</div></p><p>Yes, you can really put anything into a <span class="RktSym">looping/random/shuffled-sequence</span>,
including effect specifications.</p><h5>7.4.4<tt>&nbsp;</tt><a name="(part._.Responding_to_music_descriptors)"></a>Responding to music descriptors</h5><p>You can animate effect parameters based on what is happening in the music.
The <span class="RktPn">(</span><span class="RktSym">loudness</span><span class="stt"> </span><span class="RktSym">t</span><span class="RktPn">)</span> function, for example, tells you how loud the
music is at the given time <span class="RktSym">t</span>, as a number in the range 0.0 to 1.0.</p><p><div class="SIntrapara">Here is a scale effect which continuously scales its input depending on
the loudness -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">effect</span><span class="hspace">&nbsp;</span><span class="RktVal">"Scale"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">A</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktVal">"y"</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">loudness</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">progress</span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>See <a href="Primitive_effects.html#(part._computed-param-animation)" pltdoc="x">Computed animation curves</a> for explanation.</p><p>A more advanced technique is to select effects based on descriptor
values, i.e. you pick from a different set of effects depending on the
mood of the music. You can therefore choose to use one set for
soft parts of the music and another for the more energetic parts.</p><p><div class="SIntrapara">We use the term <span style="font-style: italic"><a name="(idx._(gentag._0))"></a>transfer curve</span> to mean a function from
a numeric value, usually in the range 0.0 to 1.0, to some other
value, which could be numeric as well. We can create a function
that selects an effect based on the value of a numeric parameters
as follows -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">picker</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">step-tc</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="hspace">&nbsp;</span><span class="RktSym">effect1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.3</span><span class="hspace">&nbsp;</span><span class="RktSym">effect2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.6</span><span class="hspace">&nbsp;</span><span class="RktSym">effect3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">With that definition, <span class="RktPn">(</span><span class="RktSym">picker</span><span class="stt"> </span><span class="RktVal">0.2</span><span class="RktPn">)</span> will give you
<span class="RktSym">effect1</span>, <span class="RktPn">(</span><span class="RktSym">picker</span><span class="stt"> </span><span class="RktVal">0.4</span><span class="RktPn">)</span> will give you <span class="RktSym">effect2</span>,
and <span class="RktPn">(</span><span class="RktSym">picker</span><span class="stt"> </span><span class="RktVal">0.9</span><span class="RktPn">)</span> will give you <span class="RktSym">effect3</span>, and ...
you get the point.</div></p><p>Now we can use the <span class="RktSym">loudness</span> function to select one of the
three effects via the <span class="RktSym">picker</span> function as follows -
<span class="RktPn">(</span><span class="RktSym">picker</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">loudness</span><span class="stt"> </span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span>. We still need to turn it into
an effect since we don&rsquo;t know what <span class="RktSym">t</span> is. We&rsquo;ll know that
only at the time the effect gets instantiated.</p><p><div class="SIntrapara">The <span class="RktSym">with-descriptor</span> form takes a function like <span class="RktSym">picker</span>
and a descriptor function like <span class="RktSym">loudness</span> (any function of time)
and yields a &ldquo;selector&rdquo; function like <span class="RktSym">looping-sequence</span>. Therefore
you can use the result of the <span class="RktSym">with-descriptor</span> form with
<span class="RktSym">effect-selector</span> to get an effect that responds to music
by selecting an appropriate effect.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">effect-selector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-descriptor</span><span class="hspace">&nbsp;</span><span class="RktSym">loudness</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">step-tc</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="hspace">&nbsp;</span><span class="RktSym">effect1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.3</span><span class="hspace">&nbsp;</span><span class="RktSym">effect2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0.6</span><span class="hspace">&nbsp;</span><span class="RktSym">effect3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5>7.4.5<tt>&nbsp;</tt><a name="(part._.Using_special_conditionals)"></a>Using special conditionals</h5><p><div class="SIntrapara">You can apply different effects depending on whether the thing being
applied to is an image or a video.
</div><div class="SIntrapara"><ul><li><p><span class="RktPn">(</span><span class="RktSym">if-image</span><span class="stt"> </span><span class="RktVar">image-effect</span><span class="stt"> </span><span class="RktVar">video-effect</span><span class="RktPn">)</span> : Behaves like
       <span class="RktVar">image-effect</span> if it is applied to an image and like
       <span class="RktVar">video-effect</span> if it is applied to video.</p></li><li><p><span class="RktPn">(</span><span class="RktSym">if-video</span><span class="stt"> </span><span class="RktVar">video-effect</span><span class="stt"> </span><span class="RktVar">image-effect</span><span class="RktPn">)</span> : The inverse of
       <span class="RktSym">if-image</span>.</p></li><li><p><span class="RktPn">(</span><span class="RktSym">if-portrait-image</span><span class="stt"> </span><span class="RktVar">portrait-effect</span><span class="stt"> </span><span class="RktVar">other-effect</span><span class="RktPn">)</span> : Special treatment
       for portrait images.</p></li><li><p><span class="RktPn">(</span><span class="RktSym">if-landscape-image</span><span class="stt"> </span><span class="RktVar">landscape-effect</span><span class="stt"> </span><span class="RktVar">other-effect</span><span class="RktPn">)</span> : Special treatment
       for landscape images.</p></li></ul></div><div class="SIntrapara">You can combine the combinators themselves. For example,
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">if-portrait-image</span><span class="hspace">&nbsp;</span><span class="RktVar">special</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-image</span><span class="hspace">&nbsp;</span><span class="RktVar">generic-image</span><span class="hspace">&nbsp;</span><span class="RktVar">for-video</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara"> is a valid effect.
You can also combine these with <span class="RktSym">effect-stack</span>, <span class="RktSym">layers</span> and such, for example -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">effect-stack</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-portrait-image</span><span class="hspace">&nbsp;</span><span class="RktSym">portfx1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-video</span><span class="hspace">&nbsp;</span><span class="RktSym">vfx2</span><span class="hspace">&nbsp;</span><span class="RktSym">blank</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktSym">grainy-gray</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h5>7.4.6<tt>&nbsp;</tt><a name="(part._.Controlling_effects_with_style_parameters)"></a>Controlling effects with style parameters</h5><p><div class="SIntrapara">If your style has a <span class="RktSym">PARTY_WILDNESS</span> parameter that the user can control,
you can use it to select appropriate effects and vary the selection over the course
of the muvee. The possibilities of combinations are endless. As an exercise, figure out
what the following effect might do, assuming <span class="RktSym">PARTY_WILDNESS</span> takes values in the
range <span class="RktVal">0.0</span> to <span class="RktVal">1.0</span> -
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">effect-selector</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">with-descriptor</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fn</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">math</span><span class="hspace">&nbsp;</span><span class="RktSym">PARTY_WILDNESS</span><span class="hspace">&nbsp;</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">time</span><span class="hspace">&nbsp;</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktSym">muvee-duration-secs</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">party-effects</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright"><a href="Combining_effects.html" title="backward to &quot;7.3 Combining effects&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="About_effects_and_transitions.html" title="up to &quot;7 About effects and transitions&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Music_triggered_effects.html" title="forward to &quot;7.5 Music triggered effects&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>